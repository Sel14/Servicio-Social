<div>
  <div class="col-6 container card justify-content-center" *ngIf="iniciar">
    <div class="card-body justify-content-center" style="display: grid;">
      <p>
        Estas apunto de comenzar el examen de {{examen.nombre}}, el cual tiene una duración de
        {{examen.duracion}} horas.
        <br>
        ¿Deseas continuar?
      </p>
      <button class="btn btn-warning col-3" style="justify-self: center;" (click)="getpreguntas()">
        Empezar
      </button>
    </div>
  </div>
</div>




<div class="conatiner col-12 justify-content-end" style="display: block;">
  <div *ngIf="!terminado">
    <div class="form-group row d-flex justify-content-center">

      <div class="container" style="display: grid;" *ngIf="currentPregunta!=null">
        <div class="row justify-content-center" style="margin-left: 40px;">
          <div class="col-8 card">
            <div class="card-body">
              <!--Contenido de la pregunta-->
              <div class="fondo">
                <label class="pregunta" for="">
                  {{ currentPregunta.pregunta }}
                </label>
              </div>

              <!--Seccion de respuestas-->
              <div *ngFor="let respuesta of currentPregunta?.listOfRespuestas, index as i">
                <input class="check-box" type="radio" name="check" />

                <label>&nbsp;{{ respuesta.respuesta }}</label>
              </div>

              <div class="fondo col-12" style="float: right;">

                <!--Boton para agregar una imagen, abre un modal para hacerlo-->
                <div class="col-12" style="float: right;" *ngIf="currentPregunta.requiereProcedimiento">
                  <button class="btn btn-warning col-2" style="float: right;">
                    Agregar Imagen
                  </button>
                  <!--Parte que pregunta si la pregunta requiere procedimiento-->
                  <label class="pregunta" style="margin: 3px;">Agregar procedimiento</label>
                </div>
              </div>
            </div>
          </div>
          <div class="col-3 container">
            <div class="col-12 container card" style="padding: 15px;">
              <div class="col-12 container card" *ngFor="let row of rowsPreguntas, index as rownp" style="border:0px; flex-direction: row;">
                <div *ngFor="let pregunta of row, index as np">
                  <div class="col-3 card container" style="justify-content: center; margin: 0px; display: grid; background-color: rgba(0,0,0,.125);"
                  *ngIf="menorque((rownp*4)+(np+1)); else pendingBlock">
                  {{(rownp*4)+(np+1)}}
                </div>
                <ng-template #pendingBlock >
                  <div *ngIf="((rownp*4)+(np+1))==respondida+1; else pendientePlus">
                    <div class="col-3 card container" style="justify-content: center; margin: 0px; display: grid; border:1px solid #2D2558">
                      {{(rownp*4)+(np+1)}}
                    </div>
                  </div>
                  <ng-template #pendientePlus>
                    <div class="col-3 card container" style="justify-content: center; margin: 0px; display: grid;">
                    {{(rownp*4)+(np+1)}}
                  </div>
                  </ng-template>
                </ng-template>
              </div>
                
              </div>
            </div>
            <div class="fondo" style="border: 1px solid rgba(0,0,0,.125);
            border-radius: 0.25rem;">
              <p style="text-align: center; color: white; margin: 0px;">Tiempo restante: 02:00 hrs</p>
            </div>
          </div>
        </div>

        <div *ngIf="!terminar; else terminarBlock" style="display: grid;">
          <button class="btn btn-warning col-3" (click)="nextPregunta()" style="justify-self: center;">
            Siguiente pregunta
          </button>
        </div>
        <ng-template #terminarBlock>
          <button class="btn btn-warning col-3" (click)="examenTerminado()" style="justify-self: center;">
            Terminar examen
          </button>
        </ng-template>

      </div>
    </div>
  </div>
</div>


<div>
  <div class="col-6 container card justify-content-center" *ngIf="terminado">
    <div class="card-body justify-content-center" style="display: grid;">
      <p>
        Concluiste el examen de {{examen.nombre}}.
        <br>
        ¡Felicidades!
      </p>
      <button class="btn btn-warning col-3" style="justify-self: center;" (click)="salir()">
        Salir
      </button>
    </div>
  </div>
</div>